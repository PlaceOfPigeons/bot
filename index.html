<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram Web App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <h1>Telegram Web App</h1>
    <button id="sendPoints">Send Points</button>

    <script>
        // Получаем данные Telegram Web App
        const tg = window.Telegram.WebApp;

        // Инициализация
        tg.ready();

        // Обработчик нажатия на кнопку
        document.getElementById('sendPoints').addEventListener('click', () => {
            const initData = tg.initData; // Получаем initData
            const points = 100; // Очки для отправки

            fetch("https://frozen-dawn-48680-9cdb4d5a9403.herokuapp.com/submit_points", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    initData: initData,
                    points: points,
                }),
            })
                .then(response => response.json())
                .then(data => {
                    if (data.error) {
                        alert(`Ошибка: ${data.error}`);
                    } else {
                        alert("Очки успешно отправлены!");
                    }
                })
                .catch(error => {
                    console.error("Ошибка:", error);
                });
        });
    </script>
</body>
</html>
